<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
      <!-- https://webclub.tistory.com/605 -->

    
    <button type="button" onclick="ajax()">비동기요청</button>
    <script>
        function ajax(){
            //1st
            // fetch("hi.txt").then(function(response){
            //     response.text().then(function(text){
            //         alert(text);
            //     })
            // })
            
            /*
                promise는 fetch를 사용했을 때, 결과에 대한 상태정보를 반환해주는 약속된 객체
                -pending : 수행중
                -fullfilled : 성공적 완료
                -rejected: 실패
            */

            // var result = fetch("ㅁㅁㅁ.txt")
            // console.log(result);

            //3nd
            //보통의 경우에는 
            // fetch("hi.txt").then(callback)
        //         fetch("hi.txt").then(function(response){
        //             if(response.status !=200){
        //                 alert("네트워크 상에 문제 발생")
        //                 return;
        //             }
                
        //         //응답객체의 text() 는 문자열의 형태로 결과를 바꿔서 then안에 콜백함수에 넣어줍니다
        //         response.text().then(function(data){
        //             console.log(data);
        //         })
        // })

            //5nd
            // fetch("hi.json").then(function(response){
            //     if(response.status != 200){
            //        alert("네트워크 상에 문제 발생")
                    
            //     }else{
            //         //응답객체 내용이 json형식이라면 json()을 이용해서 결과를 받아서 사용할 수 있습니다.
            //         response.json().then(function(data){
            //             // console.log(data)
            //             for(var k in data){
            //                 console.log(k)
            //                 console.log(data[k])
            //             }
            //         })
            //     }
            // });
            //6

            fetch("hi.json").then(function(response) {
                return response.json();                
            }).then(function(data) {
                return data.user_id;
            }).then(function (data) {
                return data;                
            }).then(function (data) {
                console.log(data)                
            })
            fetch("hi.json")
                .then((response)=>{response.json()})
                .then((data) => {data})
                .then()

        }; 
    </script>
</body>
</html>